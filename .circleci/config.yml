version: 2.1
orbs:
  npm-config: cobli/npm-config@1.0.0
jobs:
  install_using_gh_packages:
    docker:
      - image: 'cimg/node:17.2.0'
    steps:
      - checkout
      - npm-config/set-registry:
          registry-prurl: //npm.pkg.github.com/
          scope: '@compeydev'
          auth-token: $GH_TOKEN
      - run:
          name: Install pkg
          command: npm install @compeydev/musiccomp-discord-bot
  pull_docker_image:
    docker:
      - image: 'cimg/node:17.2.0'
    steps:
      - checkout
      - run:
          name: Pull docker image
          command: docker pull compey/musiccomp-v2   


workflows:
  install:
    jobs:
      - install_using_gh_packages
      - pull_docker_image